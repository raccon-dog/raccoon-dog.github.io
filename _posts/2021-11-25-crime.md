---
layout : single
title : "파이썬 - 범죄 통계 조사"
categories: Coding_Training
tag : [Python,Pandas,Matplotlib]
author_profile: false
sidebar:
    nav: "docs"
---
# PYTHON PROGRAMMING


### 레퍼런스 : 파이썬으로 데이터 주무르기


```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sb

%matplotlib inline

import platform

from matplotlib import font_manager, rc
plt.rcParams['axes.unicode_minus'] = False

if platform.system() == 'Darwin':
    rc('font', family='AppleGothic')
elif platform.system() == 'Windows':
    path = "c:/Windows/Fonts/malgun.ttf"
    font_name = font_manager.FontProperties(fname=path).get_name()
    rc('font', family=font_name)
else:
    print('Unknown system... sorry~~~~')
```

## 서울시 구별 범죄 발생과 검거율 데이터 분석
### '서울시 관서별 5대 범죄 발생 검거 현황' 파일을 가지고 분석합니다.


## 실습 1. crime_in_Seoul.csv 파일을 pandas 로 읽어오세요.
### 한글이 깨지지 않도록  encoding='euc-kr' 옵션을 넣습니다.


```python
crime_anal_police = pd.read_csv('crime_in_Seoul.csv',encoding='euc-kr',thousands=',')
```


```python
crime_anal_police.head(3)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>관서명</th>
      <th>살인 발생</th>
      <th>살인 검거</th>
      <th>강도 발생</th>
      <th>강도 검거</th>
      <th>강간 발생</th>
      <th>강간 검거</th>
      <th>절도 발생</th>
      <th>절도 검거</th>
      <th>폭력 발생</th>
      <th>폭력 검거</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>중부서</td>
      <td>2</td>
      <td>2</td>
      <td>3</td>
      <td>2</td>
      <td>105</td>
      <td>65</td>
      <td>1395</td>
      <td>477</td>
      <td>1355</td>
      <td>1170</td>
    </tr>
    <tr>
      <th>1</th>
      <td>종로서</td>
      <td>3</td>
      <td>3</td>
      <td>6</td>
      <td>5</td>
      <td>115</td>
      <td>98</td>
      <td>1070</td>
      <td>413</td>
      <td>1278</td>
      <td>1070</td>
    </tr>
    <tr>
      <th>2</th>
      <td>남대문서</td>
      <td>1</td>
      <td>0</td>
      <td>6</td>
      <td>4</td>
      <td>65</td>
      <td>46</td>
      <td>1153</td>
      <td>382</td>
      <td>869</td>
      <td>794</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 1. 구글에 주소정보를 받기 위한 API key를 얻습니다.

# 2. 우리가 짜는 파이썬 코드에서, API를 호출하기 위한 라이브러리를 설치합니다.
#    2-1 Anaconda Prompt 를 실행합니다.
#    2-2 라이브러리 인스톨을 위한 명령어를 수행합니다.
#        pip install googlemaps
```

## 실습 2. 경찰서들은 하나의 구에 여러개가 있을 수 있습니다. 따라서 우리는 구 단위로 데이터를 통합하겠습니다.

### 실습 2-1. 구글 맵 API 를 이용해서, 경찰서가 무슨 구에 있는지 확인하기 위해
### 아나콘다 프롬프트웨어 다음을 실행.  pip install googlemaps

### 실습 2-2. 구글 클라우드의 MAPS API 페이지로 이동하여, API 키를 생성합니다.
### https://cloud.google.com/maps-platform/?hl=ko
### 콘솔로 이동 => Geocoding API 선택 => 사용자인증정보 에서 API 키 생성

* 구글 맵스를 사용해서 경찰서의 위치(위도, 경도) 정보를 받아온다


```python
import googlemaps
```


```python
gmaps_key = "my_key" # 자신의 key를 사용합니다.
gmaps = googlemaps.Client(key=gmaps_key)
```


```python

gmaps.geocode('서울중부경찰서', language='ko')
```




    [{'address_components': [{'long_name': '２７',
        'short_name': '２７',
        'types': ['premise']},
       {'long_name': '수표로',
        'short_name': '수표로',
        'types': ['political', 'sublocality', 'sublocality_level_4']},
       {'long_name': '을지로동',
        'short_name': '을지로동',
        'types': ['political', 'sublocality', 'sublocality_level_2']},
       {'long_name': '중구',
        'short_name': '중구',
        'types': ['political', 'sublocality', 'sublocality_level_1']},
       {'long_name': '서울특별시',
        'short_name': '서울특별시',
        'types': ['administrative_area_level_1', 'political']},
       {'long_name': '대한민국',
        'short_name': 'KR',
        'types': ['country', 'political']},
       {'long_name': '100-032',
        'short_name': '100-032',
        'types': ['postal_code']}],
      'formatted_address': '대한민국 서울특별시 중구 을지로동 수표로 27',
      'geometry': {'location': {'lat': 37.5636465, 'lng': 126.9895796},
       'location_type': 'ROOFTOP',
       'viewport': {'northeast': {'lat': 37.56499548029149,
         'lng': 126.9909285802915},
        'southwest': {'lat': 37.56229751970849, 'lng': 126.9882306197085}}},
      'place_id': 'ChIJc-9q5uSifDURLhQmr5wkXmc',
      'plus_code': {'compound_code': 'HX7Q+FR 대한민국 서울특별시',
       'global_code': '8Q98HX7Q+FR'},
      'types': ['establishment', 'point_of_interest', 'police']}]




```python
# 정확한 지명으로 붜꿔서 , api를 호출해야 결과가 정확히 떄문에
# 관서명 컬럼에 있는 값들을, 왼쪽에는 서울을 붙이고 오른쪽에는 경찰서를 붙인다.
```


```python
police_names = []
for name in crime_anal_police['관서명']:
    police_names.append('서울'+ name[:-1]+'경찰서')
print(police_names) 
```

    ['서울중부경찰서', '서울종로경찰서', '서울남대문경찰서', '서울서대문경찰서', '서울혜화경찰서', '서울용산경찰서', '서울성북경찰서', '서울동대문경찰서', '서울마포경찰서', '서울영등포경찰서', '서울성동경찰서', '서울동작경찰서', '서울광진경찰서', '서울서부경찰서', '서울강북경찰서', '서울금천경찰서', '서울중랑경찰서', '서울강남경찰서', '서울관악경찰서', '서울강서경찰서', '서울강동경찰서', '서울종암경찰서', '서울구로경찰서', '서울서초경찰서', '서울양천경찰서', '서울송파경찰서', '서울노원경찰서', '서울방배경찰서', '서울은평경찰서', '서울도봉경찰서', '서울수서경찰서']
    


```python
# 구글 api를 호출해서 결과를 받아옴
# 우리가 필요한 건 전체 주소가 나와있는 문자열이다.
# 따라서 구글 api의 결과로 온  JSON 데이터에서 
# 어느 부분을 가져올지 파악한다.
```


```python
result = [{'address_components': [{'long_name': '２７',
    'short_name': '２７',
    'types': ['premise']},
   {'long_name': '수표로',
    'short_name': '수표로',
    'types': ['political', 'sublocality', 'sublocality_level_4']},
   {'long_name': '을지로동',
    'short_name': '을지로동',
    'types': ['political', 'sublocality', 'sublocality_level_2']},
   {'long_name': '중구',
    'short_name': '중구',
    'types': ['political', 'sublocality', 'sublocality_level_1']},
   {'long_name': '서울특별시',
    'short_name': '서울특별시',
    'types': ['administrative_area_level_1', 'political']},
   {'long_name': '대한민국',
    'short_name': 'KR',
    'types': ['country', 'political']},
   {'long_name': '100-032',
    'short_name': '100-032',
    'types': ['postal_code']}],
  'formatted_address': '대한민국 서울특별시 중구 을지로동 수표로 27',
  'geometry': {'location': {'lat': 37.5636465, 'lng': 126.9895796},
   'location_type': 'ROOFTOP',
   'viewport': {'northeast': {'lat': 37.56499548029149,
     'lng': 126.9909285802915},
    'southwest': {'lat': 37.56229751970849, 'lng': 126.9882306197085}}},
  'place_id': 'ChIJc-9q5uSifDURLhQmr5wkXmc',
  'plus_code': {'compound_code': 'HX7Q+FR 대한민국 서울특별시',
   'global_code': '8Q98HX7Q+FR'},
  'types': ['establishment', 'point_of_interest', 'police']}]
```


```python
result_station = result[0]['formatted_address'].split()[2]
```


```python
result_station = []
```


```python
for police in police_names:
    result = gmaps.geocode(police, language = 'ko')
    result_station.append(result[0]['formatted_address'].split()[2])
```

## 실습 3. station_addreess 에 저장된 주소에서, 구만 따로 띄어냅니다. (예, 종로구)
## 따로 띄어낸 구를, crime_anal_police 에 '구별' 컬럼을 만들어서 넣습니다.



```python
crime_anal_police['구별'] = result_station
```


```python
crime_anal_police.set_index('구별',inplace = True)
```


```python
crime_anal_police.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>관서명</th>
      <th>살인 발생</th>
      <th>살인 검거</th>
      <th>강도 발생</th>
      <th>강도 검거</th>
      <th>강간 발생</th>
      <th>강간 검거</th>
      <th>절도 발생</th>
      <th>절도 검거</th>
      <th>폭력 발생</th>
      <th>폭력 검거</th>
    </tr>
    <tr>
      <th>구별</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>중구</th>
      <td>중부서</td>
      <td>2</td>
      <td>2</td>
      <td>3</td>
      <td>2</td>
      <td>105</td>
      <td>65</td>
      <td>1395</td>
      <td>477</td>
      <td>1355</td>
      <td>1170</td>
    </tr>
    <tr>
      <th>종로구</th>
      <td>종로서</td>
      <td>3</td>
      <td>3</td>
      <td>6</td>
      <td>5</td>
      <td>115</td>
      <td>98</td>
      <td>1070</td>
      <td>413</td>
      <td>1278</td>
      <td>1070</td>
    </tr>
    <tr>
      <th>중구</th>
      <td>남대문서</td>
      <td>1</td>
      <td>0</td>
      <td>6</td>
      <td>4</td>
      <td>65</td>
      <td>46</td>
      <td>1153</td>
      <td>382</td>
      <td>869</td>
      <td>794</td>
    </tr>
    <tr>
      <th>서대문구</th>
      <td>서대문서</td>
      <td>2</td>
      <td>2</td>
      <td>5</td>
      <td>4</td>
      <td>154</td>
      <td>124</td>
      <td>1812</td>
      <td>738</td>
      <td>2056</td>
      <td>1711</td>
    </tr>
    <tr>
      <th>종로구</th>
      <td>혜화서</td>
      <td>3</td>
      <td>2</td>
      <td>5</td>
      <td>4</td>
      <td>96</td>
      <td>63</td>
      <td>1114</td>
      <td>424</td>
      <td>1015</td>
      <td>861</td>
    </tr>
  </tbody>
</table>
</div>



## .실습 3. crime_anal_police 데이터프레임을, csv 파일로 저장합니다.
### 저장할 파일명은 new_crime_in_Seoul.csv 로 저장하세요.
### 저장하는 함수는, 데이터프레임의 to_csv 입니다. 


```python
crime_anal_police.to_csv('new_crime_in_Seoul')
```


```python
new_crime_in_Seoul = pd.read_csv('new_crime_in_Seoul.csv',index_col = 0)
```


```python
new_crime_in_Seoul.set_index('구별',inplace=True)
```

## pandas의 pivot_table 익히기


```python
# 피봇팅 한다. 즉 컬럼의 값을 열로 만드는것.
```


```python
df = pd.read_excel('sales-funnel.xlsx')
```


```python
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Account</th>
      <th>Name</th>
      <th>Rep</th>
      <th>Manager</th>
      <th>Product</th>
      <th>Quantity</th>
      <th>Price</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>714466</td>
      <td>Trantow-Barrows</td>
      <td>Craig Booker</td>
      <td>Debra Henley</td>
      <td>CPU</td>
      <td>1</td>
      <td>30000</td>
      <td>presented</td>
    </tr>
    <tr>
      <th>1</th>
      <td>714466</td>
      <td>Trantow-Barrows</td>
      <td>Craig Booker</td>
      <td>Debra Henley</td>
      <td>Software</td>
      <td>1</td>
      <td>10000</td>
      <td>presented</td>
    </tr>
    <tr>
      <th>2</th>
      <td>714466</td>
      <td>Trantow-Barrows</td>
      <td>Craig Booker</td>
      <td>Debra Henley</td>
      <td>Maintenance</td>
      <td>2</td>
      <td>5000</td>
      <td>pending</td>
    </tr>
    <tr>
      <th>3</th>
      <td>737550</td>
      <td>Fritsch, Russel and Anderson</td>
      <td>Craig Booker</td>
      <td>Debra Henley</td>
      <td>CPU</td>
      <td>1</td>
      <td>35000</td>
      <td>declined</td>
    </tr>
    <tr>
      <th>4</th>
      <td>146832</td>
      <td>Kiehn-Spinka</td>
      <td>Daniel Hilton</td>
      <td>Debra Henley</td>
      <td>CPU</td>
      <td>2</td>
      <td>65000</td>
      <td>won</td>
    </tr>
    <tr>
      <th>5</th>
      <td>218895</td>
      <td>Kulas Inc</td>
      <td>Daniel Hilton</td>
      <td>Debra Henley</td>
      <td>CPU</td>
      <td>2</td>
      <td>40000</td>
      <td>pending</td>
    </tr>
    <tr>
      <th>6</th>
      <td>218895</td>
      <td>Kulas Inc</td>
      <td>Daniel Hilton</td>
      <td>Debra Henley</td>
      <td>Software</td>
      <td>1</td>
      <td>10000</td>
      <td>presented</td>
    </tr>
    <tr>
      <th>7</th>
      <td>412290</td>
      <td>Jerde-Hilpert</td>
      <td>John Smith</td>
      <td>Debra Henley</td>
      <td>Maintenance</td>
      <td>2</td>
      <td>5000</td>
      <td>pending</td>
    </tr>
    <tr>
      <th>8</th>
      <td>740150</td>
      <td>Barton LLC</td>
      <td>John Smith</td>
      <td>Debra Henley</td>
      <td>CPU</td>
      <td>1</td>
      <td>35000</td>
      <td>declined</td>
    </tr>
    <tr>
      <th>9</th>
      <td>141962</td>
      <td>Herman LLC</td>
      <td>Cedric Moss</td>
      <td>Fred Anderson</td>
      <td>CPU</td>
      <td>2</td>
      <td>65000</td>
      <td>won</td>
    </tr>
    <tr>
      <th>10</th>
      <td>163416</td>
      <td>Purdy-Kunde</td>
      <td>Cedric Moss</td>
      <td>Fred Anderson</td>
      <td>CPU</td>
      <td>1</td>
      <td>30000</td>
      <td>presented</td>
    </tr>
    <tr>
      <th>11</th>
      <td>239344</td>
      <td>Stokes LLC</td>
      <td>Cedric Moss</td>
      <td>Fred Anderson</td>
      <td>Maintenance</td>
      <td>1</td>
      <td>5000</td>
      <td>pending</td>
    </tr>
    <tr>
      <th>12</th>
      <td>239344</td>
      <td>Stokes LLC</td>
      <td>Cedric Moss</td>
      <td>Fred Anderson</td>
      <td>Software</td>
      <td>1</td>
      <td>10000</td>
      <td>presented</td>
    </tr>
    <tr>
      <th>13</th>
      <td>307599</td>
      <td>Kassulke, Ondricka and Metz</td>
      <td>Wendy Yule</td>
      <td>Fred Anderson</td>
      <td>Maintenance</td>
      <td>3</td>
      <td>7000</td>
      <td>won</td>
    </tr>
    <tr>
      <th>14</th>
      <td>688981</td>
      <td>Keeling LLC</td>
      <td>Wendy Yule</td>
      <td>Fred Anderson</td>
      <td>CPU</td>
      <td>5</td>
      <td>100000</td>
      <td>won</td>
    </tr>
    <tr>
      <th>15</th>
      <td>729833</td>
      <td>Koepp Ltd</td>
      <td>Wendy Yule</td>
      <td>Fred Anderson</td>
      <td>CPU</td>
      <td>2</td>
      <td>65000</td>
      <td>declined</td>
    </tr>
    <tr>
      <th>16</th>
      <td>729833</td>
      <td>Koepp Ltd</td>
      <td>Wendy Yule</td>
      <td>Fred Anderson</td>
      <td>Monitor</td>
      <td>2</td>
      <td>5000</td>
      <td>presented</td>
    </tr>
  </tbody>
</table>
</div>




```python
pd.pivot_table(df,index = ['Name'],aggfunc=np.sum)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Account</th>
      <th>Price</th>
      <th>Quantity</th>
    </tr>
    <tr>
      <th>Name</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Barton LLC</th>
      <td>740150</td>
      <td>35000</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Fritsch, Russel and Anderson</th>
      <td>737550</td>
      <td>35000</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Herman LLC</th>
      <td>141962</td>
      <td>65000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Jerde-Hilpert</th>
      <td>412290</td>
      <td>5000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Kassulke, Ondricka and Metz</th>
      <td>307599</td>
      <td>7000</td>
      <td>3</td>
    </tr>
    <tr>
      <th>Keeling LLC</th>
      <td>688981</td>
      <td>100000</td>
      <td>5</td>
    </tr>
    <tr>
      <th>Kiehn-Spinka</th>
      <td>146832</td>
      <td>65000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Koepp Ltd</th>
      <td>1459666</td>
      <td>70000</td>
      <td>4</td>
    </tr>
    <tr>
      <th>Kulas Inc</th>
      <td>437790</td>
      <td>50000</td>
      <td>3</td>
    </tr>
    <tr>
      <th>Purdy-Kunde</th>
      <td>163416</td>
      <td>30000</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Stokes LLC</th>
      <td>478688</td>
      <td>15000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Trantow-Barrows</th>
      <td>2143398</td>
      <td>45000</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>




```python
pd.pivot_table(df,index = ['Manager','Rep'], aggfunc = np.sum )
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Account</th>
      <th>Price</th>
      <th>Quantity</th>
    </tr>
    <tr>
      <th>Manager</th>
      <th>Rep</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">Debra Henley</th>
      <th>Craig Booker</th>
      <td>2880948</td>
      <td>80000</td>
      <td>5</td>
    </tr>
    <tr>
      <th>Daniel Hilton</th>
      <td>584622</td>
      <td>115000</td>
      <td>5</td>
    </tr>
    <tr>
      <th>John Smith</th>
      <td>1152440</td>
      <td>40000</td>
      <td>3</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">Fred Anderson</th>
      <th>Cedric Moss</th>
      <td>784066</td>
      <td>110000</td>
      <td>5</td>
    </tr>
    <tr>
      <th>Wendy Yule</th>
      <td>2456246</td>
      <td>177000</td>
      <td>12</td>
    </tr>
  </tbody>
</table>
</div>




```python
pd.pivot_table(df,index = ['Name'],aggfunc=np.sum,values=['Price','Quantity'])
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Price</th>
      <th>Quantity</th>
    </tr>
    <tr>
      <th>Name</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Barton LLC</th>
      <td>35000</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Fritsch, Russel and Anderson</th>
      <td>35000</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Herman LLC</th>
      <td>65000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Jerde-Hilpert</th>
      <td>5000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Kassulke, Ondricka and Metz</th>
      <td>7000</td>
      <td>3</td>
    </tr>
    <tr>
      <th>Keeling LLC</th>
      <td>100000</td>
      <td>5</td>
    </tr>
    <tr>
      <th>Kiehn-Spinka</th>
      <td>65000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Koepp Ltd</th>
      <td>70000</td>
      <td>4</td>
    </tr>
    <tr>
      <th>Kulas Inc</th>
      <td>50000</td>
      <td>3</td>
    </tr>
    <tr>
      <th>Purdy-Kunde</th>
      <td>30000</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Stokes LLC</th>
      <td>15000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Trantow-Barrows</th>
      <td>45000</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>



# 범죄 데이터 구별로 정리하기


```python
crime_anal = pd.pivot_table(crime_anal_police,index='구별',aggfunc = np.sum)
```


```python
crime_anal.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>강간 검거</th>
      <th>강간 발생</th>
      <th>강도 검거</th>
      <th>강도 발생</th>
      <th>살인 검거</th>
      <th>살인 발생</th>
      <th>절도 검거</th>
      <th>절도 발생</th>
      <th>폭력 검거</th>
      <th>폭력 발생</th>
    </tr>
    <tr>
      <th>구별</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>강남구</th>
      <td>349</td>
      <td>449</td>
      <td>18</td>
      <td>21</td>
      <td>10</td>
      <td>13</td>
      <td>1650</td>
      <td>3850</td>
      <td>3705</td>
      <td>4284</td>
    </tr>
    <tr>
      <th>강동구</th>
      <td>123</td>
      <td>156</td>
      <td>8</td>
      <td>6</td>
      <td>3</td>
      <td>4</td>
      <td>789</td>
      <td>2366</td>
      <td>2248</td>
      <td>2712</td>
    </tr>
    <tr>
      <th>강북구</th>
      <td>126</td>
      <td>153</td>
      <td>13</td>
      <td>14</td>
      <td>8</td>
      <td>7</td>
      <td>618</td>
      <td>1434</td>
      <td>2348</td>
      <td>2649</td>
    </tr>
    <tr>
      <th>관악구</th>
      <td>221</td>
      <td>320</td>
      <td>14</td>
      <td>12</td>
      <td>8</td>
      <td>9</td>
      <td>827</td>
      <td>2706</td>
      <td>2642</td>
      <td>3298</td>
    </tr>
    <tr>
      <th>광진구</th>
      <td>220</td>
      <td>240</td>
      <td>26</td>
      <td>14</td>
      <td>4</td>
      <td>4</td>
      <td>1277</td>
      <td>3026</td>
      <td>2180</td>
      <td>2625</td>
    </tr>
  </tbody>
</table>
</div>



## 실습 5. '강간검거율' , '강도검거율', '살인검거율', '절도검거율', '폭력검거율' 을 계산하여, crime_anal에 각 컬럼을 추가한다. ( 검거율은 * 100 까지 한 값)


```python
crime_anal['절도검거율'] = crime_anal['절도 검거']/crime_anal['절도 발생'] * 100
```


```python
crime_anal['강간검거율'] = crime_anal['강간 검거']/crime_anal['강간 발생'] * 100
```


```python
crime_anal['강도검거율'] = crime_anal['강도 검거']/crime_anal['강도 발생'] * 100
```


```python
crime_anal['살인검거율'] = crime_anal['살인 검거']/crime_anal['살인 발생'] * 100
```


```python
crime_anal['폭력검거율'] = crime_anal['폭력 검거']/crime_anal['폭력 발생'] * 100
```

## 실습 6. 이제 필요없는, '강간 검거' , '강도 검거', '살인 검거', '절도 검거', '폭력 검거' 컬럼을 제거한다.


```python
crime_anal.drop(['강간 검거' , '강도 검거', '살인 검거', '절도 검거', '폭력 검거'],axis = 1,inplace=True)
```


```python
crime_anal.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>강간 발생</th>
      <th>강도 발생</th>
      <th>살인 발생</th>
      <th>절도 발생</th>
      <th>폭력 발생</th>
      <th>절도검거율</th>
      <th>강간검거율</th>
      <th>강도검거율</th>
      <th>살인검거율</th>
      <th>폭력검거율</th>
    </tr>
    <tr>
      <th>구별</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>강남구</th>
      <td>449</td>
      <td>21</td>
      <td>13</td>
      <td>3850</td>
      <td>4284</td>
      <td>42.857143</td>
      <td>77.728285</td>
      <td>85.714286</td>
      <td>76.923077</td>
      <td>86.484594</td>
    </tr>
    <tr>
      <th>강동구</th>
      <td>156</td>
      <td>6</td>
      <td>4</td>
      <td>2366</td>
      <td>2712</td>
      <td>33.347422</td>
      <td>78.846154</td>
      <td>100.000000</td>
      <td>75.000000</td>
      <td>82.890855</td>
    </tr>
    <tr>
      <th>강북구</th>
      <td>153</td>
      <td>14</td>
      <td>7</td>
      <td>1434</td>
      <td>2649</td>
      <td>43.096234</td>
      <td>82.352941</td>
      <td>92.857143</td>
      <td>100.000000</td>
      <td>88.637222</td>
    </tr>
    <tr>
      <th>관악구</th>
      <td>320</td>
      <td>12</td>
      <td>9</td>
      <td>2706</td>
      <td>3298</td>
      <td>30.561715</td>
      <td>69.062500</td>
      <td>100.000000</td>
      <td>88.888889</td>
      <td>80.109157</td>
    </tr>
    <tr>
      <th>광진구</th>
      <td>240</td>
      <td>14</td>
      <td>4</td>
      <td>3026</td>
      <td>2625</td>
      <td>42.200925</td>
      <td>91.666667</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>83.047619</td>
    </tr>
  </tbody>
</table>
</div>



## 실습 7. describe() 함수로 값을 확인해 보니, 검거율이 100 이상인 경우도 있다. 따라서 100보다 크면, 100으로 값을 셋팅하세요.


```python
crime_anal.loc[crime_anal['절도검거율']>100, '절도검거율'] = 100
```


```python
crime_anal.loc[crime_anal['강도검거율']>100, '강도검거율'] = 100
```


```python
crime_anal.loc[crime_anal['강간검거율']>100, '강간검거율'] = 100
```


```python
crime_anal.loc[crime_anal['살인검거율']>100, '살인검거율'] = 100
```


```python
crime_anal.loc[crime_anal['폭력검거율']>100, '폭력검거율'] = 100
```

## 실습 8. 강간 발생, 강도 발생, 살인 발생, 절도 발생, 폭력 발생 의 컬럼 명을, 강간, 강도, 살인, 절도, 폭력으로 rename 하세요.


```python
crime_anal.columns = ['강간', '강도', '살인', '절도', '폭력', '절도검거율', '폭력검거율', '강간검거율',
       '강도검거율', '살인검거율']
```


```python
crime_anal
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>강간</th>
      <th>강도</th>
      <th>살인</th>
      <th>절도</th>
      <th>폭력</th>
      <th>절도검거율</th>
      <th>폭력검거율</th>
      <th>강간검거율</th>
      <th>강도검거율</th>
      <th>살인검거율</th>
    </tr>
    <tr>
      <th>구별</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>강남구</th>
      <td>449</td>
      <td>21</td>
      <td>13</td>
      <td>3850</td>
      <td>4284</td>
      <td>42.857143</td>
      <td>77.728285</td>
      <td>85.714286</td>
      <td>76.923077</td>
      <td>86.484594</td>
    </tr>
    <tr>
      <th>강동구</th>
      <td>156</td>
      <td>6</td>
      <td>4</td>
      <td>2366</td>
      <td>2712</td>
      <td>33.347422</td>
      <td>78.846154</td>
      <td>100.000000</td>
      <td>75.000000</td>
      <td>82.890855</td>
    </tr>
    <tr>
      <th>강북구</th>
      <td>153</td>
      <td>14</td>
      <td>7</td>
      <td>1434</td>
      <td>2649</td>
      <td>43.096234</td>
      <td>82.352941</td>
      <td>92.857143</td>
      <td>100.000000</td>
      <td>88.637222</td>
    </tr>
    <tr>
      <th>관악구</th>
      <td>320</td>
      <td>12</td>
      <td>9</td>
      <td>2706</td>
      <td>3298</td>
      <td>30.561715</td>
      <td>69.062500</td>
      <td>100.000000</td>
      <td>88.888889</td>
      <td>80.109157</td>
    </tr>
    <tr>
      <th>광진구</th>
      <td>240</td>
      <td>14</td>
      <td>4</td>
      <td>3026</td>
      <td>2625</td>
      <td>42.200925</td>
      <td>91.666667</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>83.047619</td>
    </tr>
    <tr>
      <th>구로구</th>
      <td>281</td>
      <td>15</td>
      <td>8</td>
      <td>2335</td>
      <td>3007</td>
      <td>38.072805</td>
      <td>58.362989</td>
      <td>73.333333</td>
      <td>75.000000</td>
      <td>80.877951</td>
    </tr>
    <tr>
      <th>금천구</th>
      <td>151</td>
      <td>6</td>
      <td>3</td>
      <td>1567</td>
      <td>2054</td>
      <td>56.668794</td>
      <td>80.794702</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>86.465433</td>
    </tr>
    <tr>
      <th>노원구</th>
      <td>197</td>
      <td>7</td>
      <td>10</td>
      <td>2193</td>
      <td>2723</td>
      <td>36.525308</td>
      <td>61.421320</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>85.530665</td>
    </tr>
    <tr>
      <th>도봉구</th>
      <td>102</td>
      <td>9</td>
      <td>3</td>
      <td>1063</td>
      <td>1487</td>
      <td>44.967074</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>87.626093</td>
    </tr>
    <tr>
      <th>동대문구</th>
      <td>173</td>
      <td>13</td>
      <td>5</td>
      <td>1981</td>
      <td>2548</td>
      <td>41.090358</td>
      <td>84.393064</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>87.401884</td>
    </tr>
    <tr>
      <th>동작구</th>
      <td>285</td>
      <td>9</td>
      <td>5</td>
      <td>1865</td>
      <td>1910</td>
      <td>35.442359</td>
      <td>48.771930</td>
      <td>55.555556</td>
      <td>100.000000</td>
      <td>83.089005</td>
    </tr>
    <tr>
      <th>마포구</th>
      <td>294</td>
      <td>14</td>
      <td>8</td>
      <td>2555</td>
      <td>2983</td>
      <td>31.819961</td>
      <td>84.013605</td>
      <td>71.428571</td>
      <td>100.000000</td>
      <td>84.445189</td>
    </tr>
    <tr>
      <th>서대문구</th>
      <td>154</td>
      <td>5</td>
      <td>2</td>
      <td>1812</td>
      <td>2056</td>
      <td>40.728477</td>
      <td>80.519481</td>
      <td>80.000000</td>
      <td>100.000000</td>
      <td>83.219844</td>
    </tr>
    <tr>
      <th>서초구</th>
      <td>393</td>
      <td>9</td>
      <td>8</td>
      <td>2635</td>
      <td>2399</td>
      <td>41.404175</td>
      <td>63.358779</td>
      <td>66.666667</td>
      <td>75.000000</td>
      <td>87.453105</td>
    </tr>
    <tr>
      <th>성동구</th>
      <td>126</td>
      <td>9</td>
      <td>4</td>
      <td>1607</td>
      <td>1612</td>
      <td>37.149969</td>
      <td>94.444444</td>
      <td>88.888889</td>
      <td>100.000000</td>
      <td>86.538462</td>
    </tr>
    <tr>
      <th>성북구</th>
      <td>150</td>
      <td>5</td>
      <td>5</td>
      <td>1785</td>
      <td>2209</td>
      <td>41.512605</td>
      <td>82.666667</td>
      <td>80.000000</td>
      <td>100.000000</td>
      <td>83.974649</td>
    </tr>
    <tr>
      <th>송파구</th>
      <td>220</td>
      <td>13</td>
      <td>11</td>
      <td>3239</td>
      <td>3295</td>
      <td>34.856437</td>
      <td>80.909091</td>
      <td>76.923077</td>
      <td>90.909091</td>
      <td>84.552352</td>
    </tr>
    <tr>
      <th>양천구</th>
      <td>382</td>
      <td>19</td>
      <td>10</td>
      <td>3986</td>
      <td>5716</td>
      <td>48.469644</td>
      <td>77.486911</td>
      <td>84.210526</td>
      <td>100.000000</td>
      <td>83.065080</td>
    </tr>
    <tr>
      <th>영등포구</th>
      <td>295</td>
      <td>22</td>
      <td>14</td>
      <td>2964</td>
      <td>3572</td>
      <td>32.995951</td>
      <td>62.033898</td>
      <td>90.909091</td>
      <td>85.714286</td>
      <td>82.894737</td>
    </tr>
    <tr>
      <th>용산구</th>
      <td>194</td>
      <td>14</td>
      <td>5</td>
      <td>1557</td>
      <td>2050</td>
      <td>37.700706</td>
      <td>89.175258</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>83.121951</td>
    </tr>
    <tr>
      <th>은평구</th>
      <td>166</td>
      <td>9</td>
      <td>3</td>
      <td>1914</td>
      <td>2653</td>
      <td>37.147335</td>
      <td>84.939759</td>
      <td>66.666667</td>
      <td>100.000000</td>
      <td>86.920467</td>
    </tr>
    <tr>
      <th>종로구</th>
      <td>211</td>
      <td>11</td>
      <td>6</td>
      <td>2184</td>
      <td>2293</td>
      <td>38.324176</td>
      <td>76.303318</td>
      <td>81.818182</td>
      <td>83.333333</td>
      <td>84.212822</td>
    </tr>
    <tr>
      <th>중구</th>
      <td>170</td>
      <td>9</td>
      <td>3</td>
      <td>2548</td>
      <td>2224</td>
      <td>33.712716</td>
      <td>65.294118</td>
      <td>66.666667</td>
      <td>66.666667</td>
      <td>88.309353</td>
    </tr>
    <tr>
      <th>중랑구</th>
      <td>187</td>
      <td>11</td>
      <td>13</td>
      <td>2135</td>
      <td>2847</td>
      <td>38.829040</td>
      <td>79.144385</td>
      <td>81.818182</td>
      <td>92.307692</td>
      <td>84.545135</td>
    </tr>
  </tbody>
</table>
</div>



## .실습 9. 강간, 강도, 살인, 절도, 폭력 을 노멀라이징 합니다. 
### 데이터 노멀라이징 하는 이유는, 각각의 레인지를 통일하여, 해석하기 쉽게 하기 위함입니다. 


```python
from sklearn.preprocessing import StandardScaler,MinMaxScaler
```


```python
# 표준화 하는 라이브러리
s_scaler = StandardScaler()
```


```python
# 표준화 하는 함수
# 각 컬럼의 평균과 표준편차를 학습하여, 표준화 식을 통해 결과를 변환하는 함수
crime_anal.loc[:,"강간":"폭력"] = MinMaxScaler().fit_transform(crime_anal.loc[:,"강간":"폭력"])
```


```python
mm_scaler = MinMaxScaler()
```


```python
crime_anal.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>강간</th>
      <th>강도</th>
      <th>살인</th>
      <th>절도</th>
      <th>폭력</th>
      <th>절도검거율</th>
      <th>폭력검거율</th>
      <th>강간검거율</th>
      <th>강도검거율</th>
      <th>살인검거율</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>24.000000</td>
      <td>24.000000</td>
      <td>24.000000</td>
      <td>24.000000</td>
      <td>24.000000</td>
      <td>24.000000</td>
      <td>24.000000</td>
      <td>24.000000</td>
      <td>24.000000</td>
      <td>24.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.360351</td>
      <td>0.382353</td>
      <td>0.399306</td>
      <td>0.424721</td>
      <td>0.290829</td>
      <td>39.145055</td>
      <td>77.237094</td>
      <td>85.144035</td>
      <td>92.072626</td>
      <td>84.808901</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.263464</td>
      <td>0.274814</td>
      <td>0.297919</td>
      <td>0.250679</td>
      <td>0.212406</td>
      <td>5.759176</td>
      <td>12.285098</td>
      <td>13.583076</td>
      <td>10.949588</td>
      <td>2.310261</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>30.561715</td>
      <td>48.771930</td>
      <td>55.555556</td>
      <td>66.666667</td>
      <td>80.109157</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.154179</td>
      <td>0.235294</td>
      <td>0.166667</td>
      <td>0.253934</td>
      <td>0.161681</td>
      <td>35.295879</td>
      <td>68.120404</td>
      <td>76.025641</td>
      <td>85.119048</td>
      <td>83.083024</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.269452</td>
      <td>0.352941</td>
      <td>0.291667</td>
      <td>0.385050</td>
      <td>0.271932</td>
      <td>38.198490</td>
      <td>79.831933</td>
      <td>84.962406</td>
      <td>100.000000</td>
      <td>84.495162</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.533862</td>
      <td>0.529412</td>
      <td>0.604167</td>
      <td>0.543876</td>
      <td>0.355167</td>
      <td>41.684685</td>
      <td>84.108470</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>86.633963</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>56.668794</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>88.637222</td>
    </tr>
  </tbody>
</table>
</div>



## 실습 10. 강간, 강도, 살인, 절도, 폭력 의 값을 모두 더하고, 이 더한값을 '범죄' 라는 컬럼을 만들어서 넣습니다.


```python
CCTV_result= pd.read_csv('CCTV_result.csv')
```


```python
CCTV_result.set_index('구별',inplace = True)
```


```python
CCTV_result.rename(columns={'소계':'CCTV'},inplace = True)
```


```python
pop_cctv= CCTV_result[['CCTV','인구수']]
```


```python
crime_cctv = pd.merge(crime_anal,pop_cctv,on='구별')
```


```python
crime_cctv['범죄']= crime_cctv.loc[:,'강간':'폭력'].sum(axis=1)
```


```python
crime_cctv.head(3)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>강간</th>
      <th>강도</th>
      <th>살인</th>
      <th>절도</th>
      <th>폭력</th>
      <th>절도검거율</th>
      <th>폭력검거율</th>
      <th>강간검거율</th>
      <th>강도검거율</th>
      <th>살인검거율</th>
      <th>CCTV</th>
      <th>인구수</th>
      <th>범죄</th>
    </tr>
    <tr>
      <th>구별</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>강남구</th>
      <td>1.000000</td>
      <td>0.941176</td>
      <td>0.916667</td>
      <td>0.953472</td>
      <td>0.661386</td>
      <td>42.857143</td>
      <td>77.728285</td>
      <td>85.714286</td>
      <td>76.923077</td>
      <td>86.484594</td>
      <td>2780</td>
      <td>570500.0</td>
      <td>4.472701</td>
    </tr>
    <tr>
      <th>강동구</th>
      <td>0.155620</td>
      <td>0.058824</td>
      <td>0.166667</td>
      <td>0.445775</td>
      <td>0.289667</td>
      <td>33.347422</td>
      <td>78.846154</td>
      <td>100.000000</td>
      <td>75.000000</td>
      <td>82.890855</td>
      <td>773</td>
      <td>453233.0</td>
      <td>1.116551</td>
    </tr>
    <tr>
      <th>강북구</th>
      <td>0.146974</td>
      <td>0.529412</td>
      <td>0.416667</td>
      <td>0.126924</td>
      <td>0.274769</td>
      <td>43.096234</td>
      <td>82.352941</td>
      <td>92.857143</td>
      <td>100.000000</td>
      <td>88.637222</td>
      <td>748</td>
      <td>330192.0</td>
      <td>1.494746</td>
    </tr>
  </tbody>
</table>
</div>



## 실습 11. '강간검거율','강도검거율','살인검거율','절도검거율','폭력검거율' 의 값을 모두 더하고, 이 더한값을 '검거' 라는 컬럼을 만들어서 넣습니다.


```python
crime_cctv['검거']= crime_cctv.loc[:,'절도검거율':'살인검거율'].sum(axis=1)
```


```python
crime_cctv.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>강간</th>
      <th>강도</th>
      <th>살인</th>
      <th>절도</th>
      <th>폭력</th>
      <th>절도검거율</th>
      <th>폭력검거율</th>
      <th>강간검거율</th>
      <th>강도검거율</th>
      <th>살인검거율</th>
      <th>CCTV</th>
      <th>인구수</th>
      <th>범죄</th>
      <th>검거</th>
    </tr>
    <tr>
      <th>구별</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>강남구</th>
      <td>1.000000</td>
      <td>0.941176</td>
      <td>0.916667</td>
      <td>0.953472</td>
      <td>0.661386</td>
      <td>42.857143</td>
      <td>77.728285</td>
      <td>85.714286</td>
      <td>76.923077</td>
      <td>86.484594</td>
      <td>2780</td>
      <td>570500.0</td>
      <td>4.472701</td>
      <td>369.707384</td>
    </tr>
    <tr>
      <th>강동구</th>
      <td>0.155620</td>
      <td>0.058824</td>
      <td>0.166667</td>
      <td>0.445775</td>
      <td>0.289667</td>
      <td>33.347422</td>
      <td>78.846154</td>
      <td>100.000000</td>
      <td>75.000000</td>
      <td>82.890855</td>
      <td>773</td>
      <td>453233.0</td>
      <td>1.116551</td>
      <td>370.084431</td>
    </tr>
    <tr>
      <th>강북구</th>
      <td>0.146974</td>
      <td>0.529412</td>
      <td>0.416667</td>
      <td>0.126924</td>
      <td>0.274769</td>
      <td>43.096234</td>
      <td>82.352941</td>
      <td>92.857143</td>
      <td>100.000000</td>
      <td>88.637222</td>
      <td>748</td>
      <td>330192.0</td>
      <td>1.494746</td>
      <td>406.943540</td>
    </tr>
    <tr>
      <th>관악구</th>
      <td>0.628242</td>
      <td>0.411765</td>
      <td>0.583333</td>
      <td>0.562094</td>
      <td>0.428234</td>
      <td>30.561715</td>
      <td>69.062500</td>
      <td>100.000000</td>
      <td>88.888889</td>
      <td>80.109157</td>
      <td>1496</td>
      <td>525515.0</td>
      <td>2.613667</td>
      <td>368.622261</td>
    </tr>
    <tr>
      <th>광진구</th>
      <td>0.397695</td>
      <td>0.529412</td>
      <td>0.166667</td>
      <td>0.671570</td>
      <td>0.269094</td>
      <td>42.200925</td>
      <td>91.666667</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>83.047619</td>
      <td>707</td>
      <td>372164.0</td>
      <td>2.034438</td>
      <td>416.915211</td>
    </tr>
  </tbody>
</table>
</div>



# Visualization using seaborn


```python
# 한글 그래프 처리 코드 실행
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sb

%matplotlib inline

import platform

from matplotlib import font_manager, rc
plt.rcParams['axes.unicode_minus'] = False

if platform.system() == 'Darwin':
    rc('font', family='AppleGothic')
elif platform.system() == 'Windows':
    path = "c:/Windows/Fonts/malgun.ttf"
    font_name = font_manager.FontProperties(fname=path).get_name()
    rc('font', family=font_name)
else:
    print('Unknown system... sorry~~~~')
```

## 실습 12. sb의 pairplot 으로 "강도", "살인", "폭력" 을 나타내세요. (연관성 확인)


```python
sb.pairplot(data = crime_cctv[['강도','살인','폭력']])

plt.show()
```


    
![12](/images/crime/output_78_0.png)
    



```python
sb.pairplot(data = crime_cctv, vars=['강도','살인','폭력'],kind='reg')

plt.show()
```


    
![142](/images/crime/output_79_0.png)



```python
crime_cctv[['강도','살인','폭력']].corr()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>강도</th>
      <th>살인</th>
      <th>폭력</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>강도</th>
      <td>1.000000</td>
      <td>0.672924</td>
      <td>0.707703</td>
    </tr>
    <tr>
      <th>살인</th>
      <td>0.672924</td>
      <td>1.000000</td>
      <td>0.681428</td>
    </tr>
    <tr>
      <th>폭력</th>
      <td>0.707703</td>
      <td>0.681428</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>



## 실습 13. x_vars는 "인구수", "CCTV" 를, y_vars는 "살인", "강도"로 pariplot을 나타내고, 연관성을 확인하세요.


```python
sb.pairplot(data= crime_cctv,x_vars = ['인구수','CCTV'],y_vars = ['살인','강도'],kind='reg')

plt.show()
```


    
![12g](/images/crime/output_82_0.png)
    



```python
crime_cctv[['인구수','CCTV','살인','강도']].corr()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>인구수</th>
      <th>CCTV</th>
      <th>살인</th>
      <th>강도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>인구수</th>
      <td>1.000000</td>
      <td>0.361204</td>
      <td>0.555986</td>
      <td>0.201035</td>
    </tr>
    <tr>
      <th>CCTV</th>
      <td>0.361204</td>
      <td>1.000000</td>
      <td>0.253698</td>
      <td>0.320451</td>
    </tr>
    <tr>
      <th>살인</th>
      <td>0.555986</td>
      <td>0.253698</td>
      <td>1.000000</td>
      <td>0.672924</td>
    </tr>
    <tr>
      <th>강도</th>
      <td>0.201035</td>
      <td>0.320451</td>
      <td>0.672924</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>



## 실습 14. x_vars는 "인구수", "CCTV" 를, y_vars는 "살인검거율", "폭력검거율"로 pariplot을 나타내고, 연관성을 확인하세요.


```python
sb.pairplot(data= crime_cctv,x_vars = ['인구수','CCTV'],y_vars = ['살인검거율','폭력검거율'],kind='reg')

plt.show()
```


    
![1211](/images/crime/output_85_0.png)
    



```python
crime_cctv[['인구수','CCTV','살인검거율','폭력검거율']].corr()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>인구수</th>
      <th>CCTV</th>
      <th>살인검거율</th>
      <th>폭력검거율</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>인구수</th>
      <td>1.000000</td>
      <td>0.361204</td>
      <td>-0.249549</td>
      <td>-0.179233</td>
    </tr>
    <tr>
      <th>CCTV</th>
      <td>0.361204</td>
      <td>1.000000</td>
      <td>-0.053107</td>
      <td>-0.191364</td>
    </tr>
    <tr>
      <th>살인검거율</th>
      <td>-0.249549</td>
      <td>-0.053107</td>
      <td>1.000000</td>
      <td>0.296559</td>
    </tr>
    <tr>
      <th>폭력검거율</th>
      <td>-0.179233</td>
      <td>-0.191364</td>
      <td>0.296559</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>



## 실습 15. x_vars는 "인구수", "CCTV" 를, y_vars는 "절도검거율", "강도검거율"로 pariplot을 나타내고, 연관성을 확인하세요.


```python
sb.pairplot(data= crime_cctv,x_vars = ['인구수','CCTV'],y_vars = ['절도검거율','강도검거율'],kind='reg')

plt.show()
```


    
![ff12](/images/crime/output_88_0.png)



```python
crime_cctv[['인구수','CCTV','절도검거율','강도검거율']].corr()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>인구수</th>
      <th>CCTV</th>
      <th>절도검거율</th>
      <th>강도검거율</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>인구수</th>
      <td>1.000000</td>
      <td>0.361204</td>
      <td>-0.173292</td>
      <td>0.034423</td>
    </tr>
    <tr>
      <th>CCTV</th>
      <td>0.361204</td>
      <td>1.000000</td>
      <td>0.203458</td>
      <td>-0.164280</td>
    </tr>
    <tr>
      <th>절도검거율</th>
      <td>-0.173292</td>
      <td>0.203458</td>
      <td>1.000000</td>
      <td>0.309570</td>
    </tr>
    <tr>
      <th>강도검거율</th>
      <td>0.034423</td>
      <td>-0.164280</td>
      <td>0.309570</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>



## 실습 16. 검거가 가장 높은 구는 어디입니까? 이를 확인하기 위해, 검거가 가장 높은 구부터 정렬하여 5개의 구까지 나타내세요.


```python
crime_cctv.sort_values('검거',ascending=False,inplace=True)
```


```python
crime_cctv.head(5)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>강간</th>
      <th>강도</th>
      <th>살인</th>
      <th>절도</th>
      <th>폭력</th>
      <th>절도검거율</th>
      <th>폭력검거율</th>
      <th>강간검거율</th>
      <th>강도검거율</th>
      <th>살인검거율</th>
      <th>CCTV</th>
      <th>인구수</th>
      <th>범죄</th>
      <th>검거</th>
    </tr>
    <tr>
      <th>구별</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>도봉구</th>
      <td>0.000000</td>
      <td>0.235294</td>
      <td>0.083333</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>44.967074</td>
      <td>100.000000</td>
      <td>100.0</td>
      <td>100.0</td>
      <td>87.626093</td>
      <td>485</td>
      <td>348646.0</td>
      <td>0.318627</td>
      <td>432.593167</td>
    </tr>
    <tr>
      <th>금천구</th>
      <td>0.141210</td>
      <td>0.058824</td>
      <td>0.083333</td>
      <td>0.172426</td>
      <td>0.134074</td>
      <td>56.668794</td>
      <td>80.794702</td>
      <td>100.0</td>
      <td>100.0</td>
      <td>86.465433</td>
      <td>1015</td>
      <td>255082.0</td>
      <td>0.589867</td>
      <td>423.928929</td>
    </tr>
    <tr>
      <th>광진구</th>
      <td>0.397695</td>
      <td>0.529412</td>
      <td>0.166667</td>
      <td>0.671570</td>
      <td>0.269094</td>
      <td>42.200925</td>
      <td>91.666667</td>
      <td>100.0</td>
      <td>100.0</td>
      <td>83.047619</td>
      <td>707</td>
      <td>372164.0</td>
      <td>2.034438</td>
      <td>416.915211</td>
    </tr>
    <tr>
      <th>동대문구</th>
      <td>0.204611</td>
      <td>0.470588</td>
      <td>0.250000</td>
      <td>0.314061</td>
      <td>0.250887</td>
      <td>41.090358</td>
      <td>84.393064</td>
      <td>100.0</td>
      <td>100.0</td>
      <td>87.401884</td>
      <td>1294</td>
      <td>369496.0</td>
      <td>1.490147</td>
      <td>412.885306</td>
    </tr>
    <tr>
      <th>용산구</th>
      <td>0.265130</td>
      <td>0.529412</td>
      <td>0.250000</td>
      <td>0.169004</td>
      <td>0.133128</td>
      <td>37.700706</td>
      <td>89.175258</td>
      <td>100.0</td>
      <td>100.0</td>
      <td>83.121951</td>
      <td>1624</td>
      <td>244203.0</td>
      <td>1.346674</td>
      <td>409.997915</td>
    </tr>
  </tbody>
</table>
</div>



## 실습 17. 검거가 가장 큰값이 432.593167 입니다. 검거의 값이 최대가 100이 되도록 정규화를 하세요. 그리고 검거값으로 정렬하세요.


```python
crime_cctv['검거']= crime_cctv['검거'] / crime_cctv['검거'].max() * 100
```


```python
crime_cctv.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>강간</th>
      <th>강도</th>
      <th>살인</th>
      <th>절도</th>
      <th>폭력</th>
      <th>절도검거율</th>
      <th>폭력검거율</th>
      <th>강간검거율</th>
      <th>강도검거율</th>
      <th>살인검거율</th>
      <th>CCTV</th>
      <th>인구수</th>
      <th>범죄</th>
      <th>검거</th>
    </tr>
    <tr>
      <th>구별</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>도봉구</th>
      <td>0.000000</td>
      <td>0.235294</td>
      <td>0.083333</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>44.967074</td>
      <td>100.000000</td>
      <td>100.0</td>
      <td>100.0</td>
      <td>87.626093</td>
      <td>485</td>
      <td>348646.0</td>
      <td>0.318627</td>
      <td>100.000000</td>
    </tr>
    <tr>
      <th>금천구</th>
      <td>0.141210</td>
      <td>0.058824</td>
      <td>0.083333</td>
      <td>0.172426</td>
      <td>0.134074</td>
      <td>56.668794</td>
      <td>80.794702</td>
      <td>100.0</td>
      <td>100.0</td>
      <td>86.465433</td>
      <td>1015</td>
      <td>255082.0</td>
      <td>0.589867</td>
      <td>97.997139</td>
    </tr>
    <tr>
      <th>광진구</th>
      <td>0.397695</td>
      <td>0.529412</td>
      <td>0.166667</td>
      <td>0.671570</td>
      <td>0.269094</td>
      <td>42.200925</td>
      <td>91.666667</td>
      <td>100.0</td>
      <td>100.0</td>
      <td>83.047619</td>
      <td>707</td>
      <td>372164.0</td>
      <td>2.034438</td>
      <td>96.375820</td>
    </tr>
    <tr>
      <th>동대문구</th>
      <td>0.204611</td>
      <td>0.470588</td>
      <td>0.250000</td>
      <td>0.314061</td>
      <td>0.250887</td>
      <td>41.090358</td>
      <td>84.393064</td>
      <td>100.0</td>
      <td>100.0</td>
      <td>87.401884</td>
      <td>1294</td>
      <td>369496.0</td>
      <td>1.490147</td>
      <td>95.444250</td>
    </tr>
    <tr>
      <th>용산구</th>
      <td>0.265130</td>
      <td>0.529412</td>
      <td>0.250000</td>
      <td>0.169004</td>
      <td>0.133128</td>
      <td>37.700706</td>
      <td>89.175258</td>
      <td>100.0</td>
      <td>100.0</td>
      <td>83.121951</td>
      <td>1624</td>
      <td>244203.0</td>
      <td>1.346674</td>
      <td>94.776790</td>
    </tr>
  </tbody>
</table>
</div>



## .실습 18. sb.heatmap 을 이용해서 '강간검거율', '강도검거율', '살인검거율', '절도검거율', '폭력검거율' 을 보여주세요. 단, '검거' 로 정렬한 데이터로 보여주세요.


```python
df1 = crime_cctv[['강간검거율', '강도검거율', '살인검거율', '절도검거율', '폭력검거율']]
```


```python
# 데이터 프레임의 수치를, 바로 색깔의 진하기로 변경하는 히트맵은 , seaborn의 히트맵 함수를 이용
```


```python
plt.figure(figsize=(10,8))
sb.heatmap(data=df1,cmap='RdPu',annot=True,fmt='.1f',linewidths=0.8)
plt.show()
```


    
![12331](/images/crime/output_99_0.png)
    


## 실습 19. 위에서 배운 히트맵을 이용해서, 살기 무서운 구가 어디인지 분석하세요. 


```python
df2 = crime_cctv.sort_values('범죄',ascending=False).iloc[:,0:5]
```


```python
plt.figure(figsize=(10,8))
sb.heatmap(data=df2,cmap='RdPu',annot=True,fmt='.1f',linewidths=0.8)
plt.show()
```


    
![fgf2](/images/crime/output_102_0.png)


## 실습 20. crime_in_Seoul_final.csv 파일로, crime_cctv 를 저장하세요.


```python
crime_cctv.to_csv('crime_in_Seoul_final')
```
